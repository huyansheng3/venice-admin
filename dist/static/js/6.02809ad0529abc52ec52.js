webpackJsonp([6],{"/2TO":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.edit-container {\n  padding: 15px;\n  width: 100%;\n}\n#editor {\n  min-height: 350px;\n}\n.is-checked {\n  background: #f0f7ff !important;\n}\n",""])},Us23:function(e,t,a){var o=a("YUhs");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("4bf4463c",o,!0)},Utu7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Xxa5"),l=a.n(o),n=a("exGp"),r=a.n(n),i=a("//Fk"),s=a.n(i),u=a("95YI"),c=a.n(u),d=a("u+Ax"),p=a.n(d),m=a("TM0M"),f=a.n(m),g=a("TIfe"),h=(a("0xDb"),{data:function(){return{img_404:f.a,fullscreenLoading:!1,dialog:{dialogVisible:!1,dialogImageUrl:""},dateTimePicker:{selectDate:[]},uploadFile:{uploadImageList:[]},Form:{ArticleStatus:[{value:"1",label:"开启"},{value:"9",label:"关闭"}]}}},watch:{},components:{VDistpicker:c.a,"d-player":p.a},computed:{},methods:{handlePictureCardPreview:function(e){this.dialog.dialogImageUrl=e.url,this.dialog.dialogVisible=!0},successUploadFile:function(e,t){var a=this;return new s.a(function(o,l){a.$refs.uploadLogo.submit(),a.$refs.uploadBanner.submit();var n=setInterval(function(){if(e.length===a.uploadFile.uploadLogo.length+a.uploadFile.uploadBanner.length-t.length)return clearInterval(n),o()},1e3)})},editGoodsKill:function(){var e=this;return r()(l.a.mark(function t(){var a,o,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Form.shop_name){t.next=2;break}return t.abrupt("return",e.$message.error("请填写店铺名字"));case 2:if(e.Form.shop_summary){t.next=4;break}return t.abrupt("return",e.$message.error("请填写简介"));case 4:if(e.fullscreenLoading=!0,a={Id:e.Form.id,shop_name:e.Form.shop_name,AdminToken:Object(g.a)(),cms_content:e.Form.cms_content,category_info:e.Form.category_info,goods_list:e.Form.goods_list,shop_summary:e.Form.shop_summary},o=window.document.getElementsByClassName("el-upload-list__item is-ready"),n=document.getElementsByClassName("el-upload-list__item is-success"),!(o.length>0)){t.next=17;break}return t.next=11,e.successUploadFile(o,n);case 11:a.cms_banner=[],a.shop_logo=[],e.uploadFile.uploadLogo.map(function(e,t,o){a.shop_logo.push({name:e.name,url:e.url.indexOf("blob")>-1?e.response.Data[0].filename:e.url})}),e.uploadFile.uploadBanner.map(function(e,t,o){a.cms_banner.push({name:e.name,url:e.url.indexOf("blob")>-1?e.response.Data[0].filename:e.url})}),t.next=19;break;case 17:a.shop_logo=e.uploadFile.uploadLogo,a.cms_banner=e.uploadFile.uploadBanner;case 19:e.Form.newContent&&(a.content=e.Form.newContent),e.$store.dispatch("EditShop",a).then(function(t){e.fullscreenLoading=!1,e.$message.success("修改成功"),e.$store.dispatch("GetShopList",{pageIndex:1,pageSize:100}),setTimeout(function(){e.$router.go(-1)},1e3)},function(t){e.fullscreenLoading=!1});case 22:case"end":return t.stop()}},t,e)}))()},initData:function(){var e=this;return r()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$route.params.id){t.next=2;break}return t.abrupt("return",e.$message.error("Id有误"));case 2:e.fullscreenLoading=!0,e.$store.dispatch("GetShopInfo",{Id:e.$route.params.id}).then(function(t){e.Form.id=t.Data.id,e.Form.shop_name=t.Data.shop_name,e.Form.cms_content=t.Data.cms_content,e.Form.category_info=t.Data.category_info,e.Form.goods_list=t.Data.goods_list,e.Form.shop_summary=t.Data.shop_summary,e.uploadFile.uploadLogo=t.Data.shop_logo,e.uploadFile.uploadBanner=t.Data.cms_banner,e.fullscreenLoading=!1},function(e){});case 4:case"end":return t.stop()}},t,e)}))()}},beforeDestroy:function(){},mounted:function(){this.initData()}}),b={render:function(){var e=this,t=this,a=t.$createElement,o=t._self._c||a;return o("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"edit-container"},[o("el-form",{ref:"ruleForm",staticClass:"card-box admin-form",attrs:{model:t.Form,"label-position":"left"}},[o("el-form-item",{attrs:{label:"店铺Id",prop:"id","label-width":"120px"}},[o("el-input",{attrs:{disabled:!0},model:{value:t.Form.id,callback:function(e){t.$set(t.Form,"id",e)},expression:"Form.id"}})],1),t._v(" "),o("el-form-item",{attrs:{rules:[{required:!0,message:"简介不能为空"}],label:"店铺简介",prop:"shop_summary","label-width":"120px"}},[o("el-input",{model:{value:t.Form.shop_summary,callback:function(e){t.$set(t.Form,"shop_summary",e)},expression:"Form.shop_summary"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"内容",prop:"cms_content","label-width":"120px"}},[o("vue-html5-editor",{staticStyle:{margin:"30px 0"},attrs:{content:t.Form.cms_content,"auto-height":!0},on:{change:function(e){return t.Form.newContent=e}}})],1),t._v(" "),o("el-form-item",{attrs:{id:"uploadLogo",label:"店铺Logo","label-width":"120px"}},[o("el-upload",{ref:"uploadLogo",attrs:{action:"http://awei.fun:3333/Unit/uploadfile","list-type":"picture-card",multiple:!1,limit:1,"file-list":t.uploadFile.uploadLogo,autoUpload:!1,"on-remove":function(t,a){e.uploadFile.uploadLogo=a},onPreview:t.handlePictureCardPreview,onSuccess:function(t,a,o){e.uploadFile.uploadLogo=o},onExceed:function(){t.$message.error("图片不能超过一张")}}},[o("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),o("el-form-item",{attrs:{id:"uploadBanner",label:"店铺轮播图","label-width":"120px"}},[o("el-upload",{ref:"uploadBanner",attrs:{action:"http://awei.fun:3333/Unit/uploadfile","list-type":"picture-card",multiple:!0,limit:5,"file-list":t.uploadFile.uploadBanner,autoUpload:!1,"on-remove":function(t,a){e.uploadFile.uploadBanner=a},onPreview:t.handlePictureCardPreview,onSuccess:function(t,a,o){e.uploadFile.uploadBanner=o},onExceed:function(){t.$message.error("图片不能超过五张")}}},[o("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),o("el-form-item",{attrs:{label:"商品列表","label-width":"120px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","header-align":"center",align:"center",data:t.Form.goods_list,border:""}},[o("el-table-column",{attrs:{prop:"image_url",label:"商品图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("img",{staticStyle:{width:"80px",height:"80px",cursor:"pointer"},attrs:{src:e.row.image_url[0].url},on:{click:function(){t.dialog.dialogVisible=!0,t.dialog.dialogImageUrl=e.row.image_url[0].url}}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"productName",label:"商品名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"productNo",label:"商品编号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"categoryId",label:"所属分类",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"price",label:"商品单价",sortable:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"stocks",label:"商品库存",sortable:""}})],1),t._v(" "),o("el-button",{staticStyle:{width:"100%"},attrs:{type:"default"},on:{click:function(e){t.$router.push({name:"addGoods",params:{shopId:t.$route.params.id}})}}},[t._v("添加商品")])],1),t._v(" "),o("el-form-item",[o("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.editGoodsKill}},[t._v("修改")])],1)],1),t._v(" "),o("el-dialog",{attrs:{visible:t.dialog.dialogVisible,size:"tiny"},on:{"update:visible":function(e){t.$set(t.dialog,"dialogVisible",e)}}},[o("img",{attrs:{width:"100%",src:t.dialog.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var _=a("VU/8")(h,b,!1,function(e){a("aWuK"),a("Us23")},"data-v-d66ee89a",null);t.default=_.exports},YUhs:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},aWuK:function(e,t,a){var o=a("/2TO");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("4c83a86c",o,!0)}});